# 工具类型的知识管理需求描述

## 项目路径
1. APP路径:api/backend_management/knowledge
2. APP下面的子模块名称: knowledge_management 为核心模块
3. Web端APP子项目: new_web/src/views/KnowledgeManagement
4. Tool展示界面编辑器：new_web/src/views/KnowledgeManagement/components/ToolEditor.vue
5. 保存Tool的组件：new_web/src/views/KnowledgeManagement/components/DocumentViewer.vue


## 第一版需求
1. Web端需要新增内容：new_web/src/views/KnowledgeManagement/components/ToolEditor.vue单纯input schema字段已经满足不了需求。你需要增加另外一个字段  output_schema 。
单纯input schema字段已经满足不了需求。你需要增加另外一个字段  output_schema 。
还需要增加字段：output_schema_jinja2_template
还需要增加字段：html_template
字段的含义参考文件：api/backend_management/core/models/extractor/tool_generator.py
根据用户需求智能化设计Tool工具的路径：api/backend_management/core/models/tests/test_llm.py 里面的
test_tool_generation_llm 这个方法就是根据用户的一句话智能化生成Tool所有信息的接口。（默认使用全局代码生成模型去生成即可）
生成的结果为：api/backend_management/core/models/extractor/tool_generator.py 文件里面的 ToolGeneration
服务端也需要根据上面的需求进行相应的调整

2. 在Web端你还需要支持三种返回类型的调试（用户提供input schema中的数据）：
1.根据用户的输入调用function，返回json字符串格式的数据。
2.根据用户的输入把调用function返回的数据通过 jinja2 模版渲染，返回的内容展示一波。
3.根据用户的输入把调用function返回的内容通过html_template模版渲染一波，返回的内容展示一波。

配合下面服务端里面提供的内核接口去调试即可：
你可以使用这个文件创建动态工具：api/backend_management/core/tool/dynamic_tool.py
你可以使用这个测试文件( api/backend_management/core/tool/tests/test_create_dynamic_tool.py )看看创建工具后如何返回json字符串，如何返回jinja2，如何渲染html_template 用这种方式到界面渲染即可。


