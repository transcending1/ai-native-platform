{"name": "test_collaborator_role_system", "status": "failed", "statusDetails": {"message": "AssertionError: assert 'readonly' == 'admin'\n  - admin\n  + readonly", "trace": "self = <knowledge.tests.test_namespace.TestNamespaceAPI object at 0x104c7bdd0>\n\n    @allure.story(\"协作者权限系统\")\n    def test_collaborator_role_system(self):\n        \"\"\"测试新的协作者角色权限系统\"\"\"\n        with allure.step(\"创建知识库\"):\n            namespace = Namespace.objects.create(\n                name='权限测试知识库',\n                creator=self.user1\n            )\n    \n        with allure.step(\"添加管理权限协作者\"):\n            self.client.force_authenticate(user=self.user1)\n            data = {\n                'username': self.user2.username,\n                'role': 'admin'\n            }\n            response = self.client.post(f'/knowledge/namespaces/{namespace.id}/add_collaborator/', data)\n    \n        with allure.step(\"验证添加管理员成功\"):\n            assert response.status_code == status.HTTP_201_CREATED\n            assert response.data['user']['username'] == self.user2.username\n>           assert response.data['role'] == 'admin'\nE           AssertionError: assert 'readonly' == 'admin'\nE             - admin\nE             + readonly\n\nknowledge/tests/test_namespace.py:372: AssertionError"}, "description": "测试新的协作者角色权限系统", "steps": [{"name": "创建知识库", "status": "passed", "start": 1753608963662, "stop": 1753608963736}, {"name": "添加管理权限协作者", "status": "passed", "start": 1753608963736, "stop": 1753608964229}, {"name": "验证添加管理员成功", "status": "failed", "statusDetails": {"message": "AssertionError: assert 'readonly' == 'admin'\n  - admin\n  + readonly\n", "trace": "  File \"/Users/zongjunyi/PycharmProjects/ai-native-platform/api/backend_management/knowledge/tests/test_namespace.py\", line 372, in test_collaborator_role_system\n    assert response.data['role'] == 'admin'\n"}, "start": 1753608964229, "stop": 1753608964229}], "attachments": [{"name": "log", "source": "dd3a356e-ac4c-45b3-bb1d-0837739091c5-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "6933024a-df92-49eb-b6d1-9cca1a83064c-attachment.txt", "type": "text/plain"}], "start": 1753608963662, "stop": 1753608964230, "uuid": "a45073c9-2c39-49b8-a3be-b247c42cb162", "historyId": "1a462f9f2e536fa892543f32ad9791a6", "testCaseId": "1a462f9f2e536fa892543f32ad9791a6", "fullName": "knowledge.tests.test_namespace.TestNamespaceAPI#test_collaborator_role_system", "labels": [{"name": "story", "value": "知识库API测试"}, {"name": "story", "value": "协作者权限系统"}, {"name": "feature", "value": "知识库管理"}, {"name": "tag", "value": "django_db"}, {"name": "parentSuite", "value": "knowledge.tests"}, {"name": "suite", "value": "test_namespace"}, {"name": "subSuite", "value": "TestNamespaceAPI"}, {"name": "host", "value": "zongjunyi.local"}, {"name": "thread", "value": "87401-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "knowledge.tests.test_namespace"}]}