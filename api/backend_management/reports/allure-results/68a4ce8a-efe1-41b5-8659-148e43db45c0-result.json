{"name": "test_can_edit_compatibility", "status": "failed", "statusDetails": {"message": "AssertionError: assert 'readonly' == 'admin'\n  - admin\n  + readonly", "trace": "self = <knowledge.tests.test_namespace.TestNamespaceAPI object at 0x107c8c110>\n\n    @allure.story(\"权限兼容性测试\")\n    def test_can_edit_compatibility(self):\n        \"\"\"测试can_edit字段的向后兼容性\"\"\"\n        with allure.step(\"创建知识库\"):\n            namespace = Namespace.objects.create(\n                name='兼容性测试知识库',\n                creator=self.user1\n            )\n    \n        with allure.step(\"使用旧的can_edit字段添加协作者\"):\n            self.client.force_authenticate(user=self.user1)\n            data = {\n                'username': self.user2.username,\n                'can_edit': True  # 使用旧字段\n            }\n            response = self.client.post(f'/knowledge/namespaces/{namespace.id}/add_collaborator/', data)\n    \n        with allure.step(\"验证兼容性转换\"):\n            assert response.status_code == status.HTTP_201_CREATED\n>           assert response.data['role'] == 'admin'  # 应该转换为admin角色\nE           AssertionError: assert 'readonly' == 'admin'\nE             - admin\nE             + readonly\n\nknowledge/tests/test_namespace.py:424: AssertionError"}, "description": "测试can_edit字段的向后兼容性", "steps": [{"name": "创建知识库", "status": "passed", "start": 1753609129475, "stop": 1753609129538}, {"name": "使用旧的can_edit字段添加协作者", "status": "passed", "start": 1753609129538, "stop": 1753609130263}, {"name": "验证兼容性转换", "status": "failed", "statusDetails": {"message": "AssertionError: assert 'readonly' == 'admin'\n  - admin\n  + readonly\n", "trace": "  File \"/Users/zongjunyi/PycharmProjects/ai-native-platform/api/backend_management/knowledge/tests/test_namespace.py\", line 424, in test_can_edit_compatibility\n    assert response.data['role'] == 'admin'  # 应该转换为admin角色\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n"}, "start": 1753609130263, "stop": 1753609130263}], "attachments": [{"name": "log", "source": "71acc15c-259a-46c3-be0f-c2a3900733b2-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "6c358b10-7d8a-416d-aeee-1001be56ff37-attachment.txt", "type": "text/plain"}], "start": 1753609129475, "stop": 1753609130265, "uuid": "e54efa74-9720-405e-804a-d4e7d1deacf0", "historyId": "41a6352e49ff8ddf199634ccb04e5726", "testCaseId": "41a6352e49ff8ddf199634ccb04e5726", "fullName": "knowledge.tests.test_namespace.TestNamespaceAPI#test_can_edit_compatibility", "labels": [{"name": "story", "value": "知识库API测试"}, {"name": "story", "value": "权限兼容性测试"}, {"name": "feature", "value": "知识库管理"}, {"name": "tag", "value": "django_db"}, {"name": "parentSuite", "value": "knowledge.tests"}, {"name": "suite", "value": "test_namespace"}, {"name": "subSuite", "value": "TestNamespaceAPI"}, {"name": "host", "value": "zongjunyi.local"}, {"name": "thread", "value": "88339-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "knowledge.tests.test_namespace"}]}