{"name": "test_create_document_with_position_setting", "status": "failed", "statusDetails": {"message": "AssertionError: assert 0 == 1\n +  where 0 = <Document: 文档测试库 - 现有文档>.position", "trace": "test_user = <User: User object (13)>\n\n    @allure.feature('文档管理')\n    @allure.story('创建文档（根据知识库设置）')\n    @pytest.mark.django_db\n    def test_create_document_with_position_setting(test_user):\n        \"\"\"测试根据知识库设置创建文档位置\"\"\"\n        with allure.step(\"创建知识库（文档创建位置：顶部）\"):\n            kb = KnowledgeBase.objects.create(\n                name='文档测试库',\n                desc='用于测试文档位置',\n                owner=test_user,\n                doc_create_position='top'\n            )\n    \n            # 先创建一个文档\n            existing_doc = Document.objects.create(\n                knowledge_base=kb,\n                title='现有文档',\n                content='现有内容',\n                position=0\n            )\n    \n        with allure.step(\"创建新文档\"):\n            new_doc = Document.objects.create(\n                knowledge_base=kb,\n                title='新文档',\n                content='新内容'\n            )\n    \n        with allure.step(\"验证新文档位置在顶部\"):\n            # 刷新现有文档\n            existing_doc.refresh_from_db()\n            assert new_doc.position == 0  # 新文档在顶部\n>           assert existing_doc.position == 1  # 现有文档位置+1\nE           assert 0 == 1\nE            +  where 0 = <Document: 文档测试库 - 现有文档>.position\n\nuser/tests/test_knowledge_base.py:341: AssertionError"}, "description": "测试根据知识库设置创建文档位置", "steps": [{"name": "创建知识库（文档创建位置：顶部）", "status": "passed", "start": 1753174829852, "stop": 1753174829900}, {"name": "创建新文档", "status": "passed", "start": 1753174829900, "stop": 1753174829924}, {"name": "验证新文档位置在顶部", "status": "failed", "statusDetails": {"message": "AssertionError: assert 0 == 1\n +  where 0 = <Document: 文档测试库 - 现有文档>.position\n", "trace": "  File \"/Users/zongjunyi/PycharmProjects/ai-native-platform/api/backend_management/user/tests/test_knowledge_base.py\", line 341, in test_create_document_with_position_setting\n    assert existing_doc.position == 1  # 现有文档位置+1\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n"}, "start": 1753174829924, "stop": 1753174829985}], "start": 1753174829852, "stop": 1753174829986, "uuid": "bbca17a5-b655-44b6-9bcf-3497ecb5c3b2", "historyId": "e4675f7a78df79fbcfdd2410a5cb3a32", "testCaseId": "e4675f7a78df79fbcfdd2410a5cb3a32", "fullName": "user.tests.test_knowledge_base#test_create_document_with_position_setting", "labels": [{"name": "story", "value": "创建文档（根据知识库设置）"}, {"name": "feature", "value": "文档管理"}, {"name": "tag", "value": "django_db"}, {"name": "parentSuite", "value": "user.tests"}, {"name": "suite", "value": "test_knowledge_base"}, {"name": "host", "value": "zongjunyi.local"}, {"name": "thread", "value": "75976-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "user.tests.test_knowledge_base"}]}